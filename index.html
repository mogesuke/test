<html ng-app="MyApp">
  <head>
    <title>test</title>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">

    <script src="./js/jquery-3.1.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap-tpls.min.js"></script>
    <script>

      angular.module("MyApp", ["ui.bootstrap"])
          .run(["$rootScope", "$modal", function($scope, $modal) {
        $scope.open = function() {
          $modal.open({templateUrl:"aisatsu.html", scope: $scope});
        };

        $(window).on("beforeunload", function() {
        	$scope.open();
        	//return "";
        });
      }]);

    </script>
  </head>
  <style>
    .table_box {
      border-collapse:separate;
      width: 50%;
      margin-left: auto;
      margin-right: auto;
      margin-top: 10px;
      padding: 10px;
    }

    .box {
      text-align: center;
      border-radius: 10px;
      border: solid 2px;
      padding: 5px;
      margin: 5px;
    }

    .active_box {
      background-color: #00FFFF;
    }

    .parent_box {
      width: 50%;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
  <body>
  	<div>
  	  <table class="table_box">
  		<tr>
  		  <td id="step1" class="box active_box">STEP1</td>
  		  <td id="step2" class="box">STEP2</td>
  		  <td id="step3" class="box">STEP3</td>
        </tr>
  	  </table>

  	  <div class="parent_box">
        <button class="btn btn-warning" type="button" ng-click="open()">TEST</button>
      </div>
    </div>

  	
  </body>

  <!-- モーダルの中身 -->
  <script type="text/ng-template" id="aisatsu.html">
    <div class="modal-header">
      <button type="button" class="close" ng-click="$dismiss()" aria-hidden="true"></button>
      <h3>閉じる前にご確認ください！</h3>
    </div>
    <div class="modal-body">お得な情報が！あーだ。こーだ。</div>
    <div class="modal-footer">
      <button class="btn btn-danger" ng-click="$close()">終了する</button>
    </div>
  </script>
</html>